<ion-header>
    <ion-navbar>
        <ion-title *ngIf="slides.getActiveIndex() < questions.length">
            {{slides.getActiveIndex() + 1}} / {{questions.length}}
        </ion-title>
        <ion-title *ngIf="slides.getActiveIndex() >= questions.length">
            Summary
        </ion-title>    
    </ion-navbar>
</ion-header>

<ion-content>
    <ion-slides #slides 
        (ionSlideNextEnd)="slideChanged()"
        (ionSlidePrevEnd)="slideChanged()"
        >
        <ion-slide *ngFor="let question of questions; let i = index;" 
            [class.correct]="question.style == 'correct'"
            [class.incorrect]="question.style == 'incorrect'"
            >
            <ion-item>
                <ruby>
                    {{question.word}}
                    <rt>{{question.reading}}</rt>
                </ruby>
                <ion-note item-right>
                    {{question.meaning}}
                </ion-note>
            </ion-item>

            <ion-list>
                <ion-item *ngIf="question.type == 'te-form'">
                    て form
                </ion-item>
                <ion-item *ngIf="question.type == 'plain-negative'">
                    <ion-icon name="shirt" item-left></ion-icon>
                    Plain</ion-item>
                <ion-item *ngIf="question.type == 'plain-negative'">
                    <ion-icon name="sad" item-left></ion-icon>
                    Negative</ion-item>
                <ion-item *ngIf="question.type == 'plain-negative'">
                    <ion-icon name="fastforward" item-left></ion-icon>
                    Non-past</ion-item>
            </ion-list>

            <form (submit)="checkAnswer(question)">
                <ion-item ngClass="answer-item">
                    <ion-input
                        [attr.id]="'answer' + (i+1)"
                        [(ngModel)]="question.givenAnswer"
                        [ngModelOptions]="{standalone: true}"
                        class="answerInput" type="text" placeholder="答え" 
                        autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
                </ion-input>
                <button ion-button icon-only item-right clear
                        type="submit"
                        >
                    <ion-icon name="arrow-forward"></ion-icon>
                </button>
            </ion-item>
        </form>

        <ion-item class="answer" *ngIf="question.style == 'incorrect'">
            Answer: 
            <span>{{question.answer}}</span>
        </ion-item>
    </ion-slide>

    <ion-slide ngClass="summary">
        <ion-list>
            <ion-item *ngFor="let question of questions" ngClass="{{question.style}}">
                <div *ngIf="question.style == 'incorrect'"> 
                    Given: {{question.givenAnswer}}
                </div>
                <div>
                    Answer: {{question.answer}}
                </div>
                <ion-icon *ngIf="question.style == 'correct'" name="radio-button-off" item-right></ion-icon>
                <ion-icon *ngIf="question.style == 'incorrect'" name="close" item-right></ion-icon>
            </ion-item>
        </ion-list>
    </ion-slide>
</ion-slides>
</ion-content>
