<ion-header>
    <ion-navbar hideBackButton>
        <ion-buttons begin>
            <button ion-button icon-only (click)="showSummary()">
                <ion-icon name="arrow-back"></ion-icon>
                {{'review.stop'|translate}}
            </button>
        </ion-buttons>

        <ion-title>
            {{index + 1}} / {{questions.length}}
        </ion-title>

        <ion-buttons end>
            <button ion-button icon-only (click)="nextQuestion()">
                {{'review.skip'|translate}}
                <ion-icon name="arrow-forward"></ion-icon>
            </button>
        </ion-buttons>
    </ion-navbar>
</ion-header>

<ion-content [ngClass]="classNames()">
    <ion-item ngClass="dictionary">
        <furigana [input]="currentQuestion()"></furigana>

        <ion-note item-right>
            {{questions[index]?.meaning}}
        </ion-note>
    </ion-item>

    <review-settings-list
        [question]="questions[index]"
        [settings]="settings">
    </review-settings-list>

    <form (submit)="checkAnswer(questions[index])">
        <ion-item ngClass="answer-item">
            <ion-input
                #answerInput
                #answerInputNative
                lang="ja"
                [(ngModel)]="questions[index].givenAnswer"
                [ngModelOptions]="{standalone: true}"
                class="answerInput"
                type="text"
                placeholder="答え"
                inputmode="kana"
                autocomplete="off"
                autocorrect="off"
                autocapitalize="none"
                spellcheck="false">
            </ion-input>
            <button ion-button icon-only item-right clear type="submit"
                    [ngClass]="{pulse: questions[index]?.answered}">
                <ion-icon name="arrow-forward"></ion-icon>
            </button>
        </ion-item>
    </form>

    <!-- Show all allowed answers if given answer is incorrect -->
    <answers [question]="questions[index]"
             *ngIf="questions[index]?.correct === false"></answers>

</ion-content>
